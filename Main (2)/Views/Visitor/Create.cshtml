@model VisitorManagement.DataAccess.ViewModel.VisitViewModel

@{
    ViewData["Title"] = "Create";
    Layout = "_Layout";
}


<style>
    #VisitArrangement .select2-selection--single {
        /*width: 285px !important;
        margin-left: 109px !important;*/
        width: 242px !important;
        margin-left: 10px !important;
    }
    /*#VisitArrangement .select2-selection__arrow b {
        margin-left: 70px !important;
        border-top: 10px solid #999 !important;
        border-left: 5px solid transparent !important;
        border-right: 5px solid transparent !important;
        top: 15px !important;
    }*/
    /*.select2-dropdown.select2-dropdown--below {
        width: 285px!important;
        margin-left: 109px;
    }*/

    .visitArrangements {
        /*margin-left: -65px;*/
        width: 73% !important;
    }
</style>

<script src="~/vendors/jquery/dist/jquery.min.js"></script>
@*<script src="~/vendors/validator/bootstrap-select.js"></script>*@
<script type="text/javascript">
    $(function () {
        $("[id*=chkHeader]").bind("click", function () {
            var chkHeader = $(this);
            //Find and reference the GridView.
            var grid = $(this).closest("table");
            //Loop through the CheckBoxes in each Row.
            $("td", grid).find("input[type=checkbox]").each(function () {
                var id = $(this).closest("tr")[0].id.split('_')[1];
                //If Header CheckBox is checked.
                //Then check all CheckBoxes and enable the TextBoxes.
                if (chkHeader.is(":checked")) {
                    $(this).attr("checked", "checked");
                    var td = $("td", $(this).closest("tr"));
                    td.css({ "background-color": "#D8EBF2" });
                    $("input[type=text]", td).removeAttr("disabled");
                    $("#delegateContactID", td).removeAttr("disabled");
                    $("#finaltr_" + id).show();
                    $("#chkarrangment_" + id).prop('checked', true);
                } else {
                    $(this).removeAttr("checked");
                    var td = $("td", $(this).closest("tr"));
                    td.css({ "background-color": "#FFF" });
                    $("input[type=text]", td).attr("disabled", "disabled");
                    $("#delegateContactID", td).attr("disabled", "disabled");
                    $("#chkarrangment_" + id).prop('checked', false);
                    $("#txtarrangdesc_" + id).val("");
                    $("#finaltr_" + id).hide();
                }
            });
        });


        $("[id*=arrangmentsdescription]").change(function () {
            //debugger;
            var id = $(this).closest("tr")[0].id.split('_')[1];
            var des = $(this).val();
            $("#txtarrangdesc_" + id).val(des);

        });

        $("[id*=delegateContactID]").change(function () {
            //debugger;
            var id = $(this).closest("tr")[0].id.split('_')[1];
            var des = $(this).val();
            $("#ddldelegatearrangid_" + id).val(des);
        });



        //Enable Disable TextBoxes in a Row when the Row CheckBox is checked.
        $("[id*=isSelected]").bind("click", function () {
            //debugger;
            //Find and reference the GridView.
            var grid = $(this).closest("table");
            //Find and reference the Header CheckBox.
            var chkHeader = $("[id*=chkHeader]", grid);
            var id = $(this).closest("tr")[0].id.split('_')[1];
            //If the CheckBox is Checked then enable the TextBoxes in the Row.
            if ($(this).is(":checked")) {
                var td = $("td", $(this).closest("tr"));
                td.css({ "background-color": "#D8EBF2" });
                $("input[type=text]", td).removeAttr("disabled");
                $("#delegateContactID", td).removeAttr("disabled");
                $("#finaltr_" + id).show();
                $("#chkarrangment_" + id).prop('checked', true);

            } else {
                var td = $("td", $(this).closest("tr"));
                td.css({ "background-color": "#FFF" });
                $("input[type=text]", td).attr("disabled", "disabled");
                $("#delegateContactID", td).attr("disabled", "disabled");
                $("#chkarrangment_" + id).prop('checked', false);
                $("#txtarrangdesc_" + id).val("");
                $("#finaltr_" + id).hide();
            }
            //Enable Header Row CheckBox if all the Row CheckBoxes are checked and vice versa.
            if ($("[id*=isSelected]", grid).length == $("[id*=isSelected]:checked", grid).length) {
                chkHeader.attr("checked", "checked");
            } else {
                chkHeader.removeAttr("checked");
            }
        });
    });


</script>

<script src="~/vendors/moment/min/moment.min.js"></script>
<script src="~/bootstrap-datetimepicker.js"></script>

<div class="right_col" role="main">
    <div class="">
        <div class="page-title">
            <div class="title_left">
                <h3>Create Visit</h3>
            </div>
        </div>
        <div class="clearfix"></div>

        <div class="row">
            <div class="col-md-12 col-sm-12 ">
                <div class="x_panel">
                    <div class="x_content">

                        <form asp-action="Create" method="post">
                            <div id="wizard" class="form_wizard wizard_horizontal">
                                <ul class="wizard_steps">
                                    <li>
                                        <a href="#step-1">
                                            <span class="step_no">1</span>
                                            <span class="step_descr">
                                                Visitor Details<br />
                                            </span>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="#step-2">
                                            <span class="step_no">2</span>
                                            <span class="step_descr">
                                                Details<br />
                                            </span>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="#step-3">
                                            <span class="step_no">3</span>
                                            <span class="step_descr">
                                                Participant Details<br />
                                            </span>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="#step-4">
                                            <span class="step_no">4</span>
                                            <span class="step_descr">
                                                Arrangements<br />
                                            </span>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="#step-5">
                                            <span class="step_no">5</span>
                                            <span class="step_descr">
                                                Confirmation<br />
                                            </span>
                                        </a>
                                    </li>
                                </ul>
                                <div src="step-1" id="step-1">
                                    <div class="form-group row" data-parsley-validate>
                                        @*<div class="item form-group" data-parsley-validate>*@
                                        <label class="col-form-label col-md-3 col-sm-3 label-align" for="visitorName">
                                            Visitor Name <span id="vn" class="required">*</span>
                                        </label>


                                        <div class="col-md-6 col-sm-6 ">
                                            <input asp-for="VisitorName" onchange="GetDetails()" data-inputmask="'mask' : '(999) 999-9999'" name="VisitorName" id="visitorName" class="form-control required" required="required" />
                                            <span class="fa fa-user form-control-feedback right" aria-hidden="true"></span>
                                        </div>

                                        <div class=" col-md-9 col-sm-6">
                                            <label id="ValvisitorName" class="text-danger" style="display:none;margin-left:35%">* This field is required</label>
                                            <label id="nameValidate" class="text-danger" style="display:none;margin-left:35%">* Please enter a valid Name</label>
                                        </div>


                                    </div>
                                    <div class="form-group row" data-parsley-validate>
                                        <label class="col-form-label col-md-3 col-sm-3 label-align" for="last-name">
                                            Email Address <span id="em" class="required">*</span>
                                        </label>
                                        <div class="col-md-6 col-sm-6  ">
                                            <input asp-for="EmailAddress" onchange="validate();" name="EmailAddress" id="emailAddress" class="form-control  required" required="required" />
                                            <span class="fa fa-envelope form-control-feedback right" aria-hidden="true"></span>
                                        </div>

                                        <div class=" col-md-9 col-sm-6">
                                            <label id="ValemailAddress" class="text-danger" style="display:none;margin-left:35%">* This field is required</label>
                                            <label id="emailValidate" class="text-danger" style="display:none;margin-left:35%">* Please enter a valid Email Address</label>
                                        </div>

                                    </div>
                                    <div class="form-group row" data-parsley-validate>
                                        <label class="col-form-label col-md-3 col-sm-3 label-align" for="first-name">
                                            Phone <span id="pn" class="required">*</span>
                                        </label>
                                        <div class="col-md-6 col-sm-6 ">
                                            <input asp-for="Phone" id="phone" onchange="validate();" name="phone" class="form-control  required" required="required" />
                                            <span class="fa fa-phone form-control-feedback right" aria-hidden="true"></span>
                                        </div>

                                        <div class=" col-md-9 col-sm-6">
                                            <label id="Valphone" class="text-danger" style="display:none;margin-left:35%">* This field is required</label>
                                            <label id="phoneValidate" class="text-danger" style="display:none;margin-left:35%">* Please enter a valid Phone Number</label>

                                        </div>

                                    </div>

                                    <div class="form-group row" data-parsley-validate>
                                        <label class="col-form-label col-md-3 col-sm-3 label-align">
                                            Company <span id="cn" class="required">*</span>
                                        </label>
                                        <div class="col-md-6 col-sm-6 ">
                                            <input asp-for="Company" onchange="validate();" name="Company" class="form-control  required" id="company" required="required" />
                                            <span asp-validation-for="Company" class="fa fa-building form-control-feedback right" />
                                        </div>

                                        <div class=" col-md-9 col-sm-6">
                                            <label id="Valcompany" class="text-danger" style="display:none;margin-left:35%">* This field is required</label>
                                        </div>

                                    </div>
                                    <div class="form-group row" data-parsley-validate>
                                        <label class="col-form-label col-md-3 col-sm-3 label-align">
                                            Designation <span id="dn" class="required">*</span>
                                        </label>
                                        <div class="col-md-6 col-sm-6 ">
                                            <input asp-for="Designation" onchange="validate();" name="Designation" id="designation" class="form-control  required" required="required" />
                                            <span asp-validation-for="Designation" class="fa fa-align-justify form-control-feedback right" />
                                        </div>

                                        <div class=" col-md-9 col-sm-6">
                                            <label id="Valdesignation" class="text-danger" style="display:none;margin-left:35%">* This field is required</label>
                                        </div>

                                    </div>

                                    @*hidden Field*@

                                    <div class="form-group row" data-parsley-validate style="visibility:hidden">
                                        <label class="col-form-label col-md-3 col-sm-3 label-align" for="first-name">
                                            Phone <span id="pn" class="required">*</span>
                                        </label>
                                        <div class="col-md-6 col-sm-6 ">
                                            <input asp-for="Phone" id="phone" onchange="validate();" name="phone" class="form-control  required" required="required" />
                                            <span class="fa fa-phone form-control-feedback right" aria-hidden="true"></span>
                                        </div>

                                        <div class=" col-md-9 col-sm-6">
                                            <label id="Valphone" class="text-danger" style="display:none;margin-left:35%">* This field is required</label>
                                        </div>

                                    </div>


                                    @*<div class="form-group row dropdown-sin-2" style="visibility:hidden">
                                            <label class="col-form-label col-md-3 col-sm-3 label-align" for="first-name">
                                                End Time <span class="required">*</span>
                                            </label>
                                            <div class="col-md-6 col-sm-6 ">
                                                <input asp-for="EndTime" id="endTime" name="StartTime" class="form-control" />
                                                <span asp-validation-for="EndTime" class="text-danger" />
                                            </div>
                                        </div>*@
                                </div>

                                <div id="step-2">
                                    <div class="form-group row">
                                        <label class="col-form-label col-md-3 col-sm-3 label-align" for="first-name">
                                            Visiting Date <span class="required">*</span>
                                        </label>
                                        <div class="col-md-6 col-sm-6 ">
                                            <input type="date" id="visitingDate" value="@DateTime.Now" asp-for="VisitingDate" class="form-control" required="required" />
                                            <span asp-validation-for="VisitingDate" class="text-danger"></span>
                                        </div>


                                        <div class=" col-md-9 col-sm-6">
                                            <label id="ValvisitingDate" class="text-danger" style="display:none;margin-left:35%">* This field is required</label>
                                            <label id="dateValidate" class="text-danger" style="display:none;margin-left:35%">* Visiting date should be greater than or equal to Today's Date</label>
                                        </div>

                                    </div>

                                    <div class="form-group row">
                                        <label class="col-form-label col-md-3 col-sm-3 label-align" for="last-name">
                                            Start Time <span class="required">*</span>
                                        </label>
                                        <div class="col-md-6 col-sm-6 ">
                                            <input asp-for="StartTime" onchange="start();" id="startTime" name="StartTime" class="form-control" />
                                            @*@Html.TextBoxFor(Model => Model.StartTime, null,new { htmlAttributes= new { @class = "form-control borderRadius width ml-3", id = "startTime", name = "StartTime"}})*@
                                            <span asp-validation-for="StartTime" class="text-danger" />
                                        </div>


                                        <div class=" col-md-9 col-sm-6">
                                            <label id="ValstartTime" class="text-danger" style="display:none;margin-left:35%">* This field is required</label>
                                        </div>

                                    </div>
                                    <div class="form-group row">
                                        <label class="col-form-label col-md-3 col-sm-3 label-align" for="first-name">
                                            End Time <span class="required">*</span>
                                        </label>
                                        <div class="col-md-6 col-sm-6 ">
                                            <input asp-for="EndTime" id="endTime" name="StartTime" class="form-control" />
                                            <span asp-validation-for="EndTime" class="text-danger" />
                                        </div>


                                        <div class=" col-md-9 col-sm-6">
                                            <label id="ValendTime" class="text-danger" style="display:none;margin-left:35%">* This field is required</label>
                                        </div>

                                    </div>
                                </div>

                                <div id="step-3">
                                    @*<div class="form-group row">
            <label class="col-form-label col-md-3 col-sm-3 label-align" for="last-name">
                Primary Contact
            </label>
            <div class="col-md-5 col-sm-5 ">
                <select id="ddlprimaryContact" onchange="PrimaryChange()" class="form-control" asp-for="PrimaryParticipant" data-live-search="true">
                    @foreach (var itemUser in Model.Users)
                    {
                        <option class="col-xs-offset-7" name="PrimaryParticipant.ParticipantId" value="@itemUser.UserId">@itemUser.FirstName </option>
                    }
                </select>
            </div>
        </div>*@



                                    @*<div class="form-group row">




            <label class="col-form-label col-md-3 col-sm-3 label-align" for="last-name">
                Primary Contact
            </label>
            <select id="selUser" style="width:200px;" class="form-control" asp-for="PrimaryParticipant"
                    data-live-search="true">
                @foreach (var itemUser in Model.Users)
                {
                    <option class="col-xs-offset-7" name="PrimaryParticipant.ParticipantId" value="@itemUser.UserId">@itemUser.FirstName </option>
                }
            </select>

            <br />
            <div id='result'></div>
        </div>*@

                                   
                                    <div class="form-group row dropdown-sin-2">
                                        <label class="col-form-label col-md-3 col-sm-3 label-align" for="first-name" style="margin-left:1%">
                                            Primary Contact <span class="required"></span>
                                        </label>
                                        <select id="ddlprimaryContact" onchange="PrimaryChange()" style="display:none" asp-for="PrimaryParticipant" data-live-search="true">
                                            @foreach (var itemUser in Model.Users)
                                            {
                                                <option onclick="PrimaryChange()" class="col-xs-offset-7" id="PChide" name="PrimaryParticipant.ParticipantId" value="@itemUser.UserId">@itemUser.FirstName </option>
                                            }
                                        </select>
                                        <br />
                                        <div id='result'></div>
                                    </div>


                                    <div class="form-group row dropdown-sin-2">
                                        <label class="col-form-label col-md-3 col-sm-3 label-align" for="first-name" style="margin-left:1%">
                                            Secondary Contact <span class="required"></span>
                                        </label>
                                        @*<div class="col-md-5 col-sm-5 ">*@

                                        <select style="display:none" name="" asp-for="SecondaryParticipant" id="ddlsecondaryContact" class="form-control" data-live-search="true">
                                            @foreach (var itemUser in Model.Users)
                                            {
                                                <option class="col-xs-offset-3" id="SChide" name="SecondaryParticipant" value="@itemUser.UserId">@itemUser.FirstName</option>
                                            }
                                        </select>

                                        @Html.Hidden("SecondaryValues")

                                    </div>

                                    @*extra field*@
                                    <div class="form-group row dropdown-sin-2" style="visibility:hidden">
                                        <label class="col-form-label col-md-3 col-sm-3 label-align" for="first-name">
                                            End Time <span class="required">*</span>
                                        </label>
                                        <div class="col-md-6 col-sm-6 ">
                                            <input asp-for="EndTime" id="endTime" name="StartTime" class="form-control" />
                                            <span asp-validation-for="EndTime" class="text-danger" />
                                        </div>
                                    </div>
                                </div>


                                <div src="step-4" id="step-4">
                                    <div class="col-md-12 col-sm-12  ">
                                        <div class="x_panel">
                                            <div class="x_content">
                                                <div class="table-responsive">
                                                    <table class="table table-striped jambo_table bulk_action">
                                                        <thead>
                                                            <tr class="headings">
                                                                <th></th>
                                                                <th style="padding-left:0px;font-size:15px">Arrangement Name</th>
                                                                <th style="padding-left:80px;font-size:15px">Description</th>
                                                                <th style="padding-left:71px;font-size:15px">Delegate Contact </th>
                                                            </tr>
                                                        </thead>
                                                        <tbody id="VisitArrangement" name="VisitArrangement">
                                                            @if (Model != null)
                                                            {
                                                                @for (int index = 0; Model.VisitArrangement.Count > index; index++)
                                                                {
                                                                    var id = "tr_" + @Model.VisitArrangement[index].ArrangementId;

                                                                    <tr id="@id" name="Model.VisitArrangement">

                                                                        <td>
                                                                            <div class="form-group ">
                                                                                @Html.HiddenFor(i => i.VisitArrangement[index].ArrangementId)
                                                                                @Html.CheckBoxFor(i => i.VisitArrangement[index].IsSelected, new { @id = "isSelected", style = "width:20px;height:20px" })
                                                                            </div>
                                                                        </td>
                                                                        <td>


                                                                            @Html.DisplayFor(m => m.VisitArrangement[index].Name, new { @class = "form-control input-lg visitArrangements", @disabled = "disabled", @id = "arrangmentsdescription" })

                                                                            @*<span asp-for="@Model.VisitArrangement[index].Name" class="visitArrangements" id="name" style="font-size:medium;margin-top:40%;" name="@Model.VisitArrangement[index].Name">@Model.VisitArrangement[index].Name</span>
                                                                                <span asp-validation-for="@Model.VisitArrangement[index].Name" class="text-danger"></span>*@


                                                                        </td>
                                                                        <td>
                                                                            <div class="form-group">

                                                                                @Html.TextBoxFor(m => m.VisitArrangement[index].Description, new { @class = "form-control input-lg visitArrangements", @disabled = "disabled", @id = "arrangmentsdescription" })
                                                                                <span asp-validation-for="@Model.VisitArrangement[index].Description" class="text-danger"></span>

                                                                            </div>
                                                                        </td>
                                                                        <td>
                                                                            <div class="form-group " style="position:relative">

                                                                                @Html.DropDownListFor(m => m.VisitArrangement[index].DelegateContactID, new SelectList(Model.Users, "UserId", "FirstName"), new { @class = "visitArrangements dropdownSearch", @disabled = "disabled", @id = "delegateContactID" })



                                                                                @*<select asp-for="visitArrangements.DelegateContactId" style="width:200px;" class="form-control" id="selUser" data-live-search="true">
                                                                                            @foreach (var itemUser in Model.Users)
                                                                                            {
                                                                                                <option value="@itemUser.UserId">@itemUser.FirstName</option>
                                                                                            }
                                                                                        </select>


                                                                                        @*primary participant
                                                                                        <select id="selUser" style="width:200px;" class="form-control" asp-for="PrimaryParticipant"
                                                                                                data-live-search="true">
                                                                                            @foreach (var itemUser in Model.Users)
                                                                                            {
                                                                                                <option class="col-xs-offset-7" name="PrimaryParticipant.ParticipantId" value="@itemUser.UserId">@itemUser.FirstName </option>
                                                                                            }
                                                                                        </select>
                                                                                        <br />
                                                                                        <div id='result'></div>


                                                                                    </div>*@


                                                                                @*<label class="col-form-label col-md-3 col-sm-3 label-align" for="last-name">
                                                                                        Primary Contact
                                                                                    </label>
                                                                                    <select id="delecontact" style="width:200px;" class="form-control" asp-for="PrimaryParticipant"
                                                                                            data-live-search="true">
                                                                                        @foreach (var itemUser in Model.Users)
                                                                                        {
                                                                                            <option class="col-xs-offset-7" name="PrimaryParticipant.ParticipantId" value="@itemUser.UserId">@itemUser.FirstName </option>
                                                                                        }
                                                                                    </select>

                                                                                    <input type='button' value='Seleted option' id='but_read'>

                                                                                    <br />
                                                                                    <div id='result'></div>*@







                                                                            </div>
                                                                        </td>
                                                                    </tr>
                                                                }
                                                            }
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>



                                <div id="step-5">
                                    <div>
                                        <div>
                                            <div class="x_content">
                                                <table class="table">
                                                    <tr class="col-offset-4 " style="background-color:rgba(52,73,94,0.94); color:white; font-size:18px;">
                                                        <td class=" headings ">
                                                            Visitor Info
                                                        </td>
                                                        <td style="border:none"></td>
                                                        <td style="border:none"></td>
                                                        <td></td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <b style="margin-left:0%">Visitor Name</b>
                                                            <input asp-for="VisitorName" name="VisitorName" id="visitorNameConfirmation" class="form-control" />
                                                        </td>

                                                        <td>
                                                            <b style="margin-left:23%">Email Address</b>
                                                            <input asp-for="EmailAddress" name="EmailAddress" id="emailConfirmation" class="form-control" style="margin-left:23%" />
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <b style="margin-left:0%">Phone</b><br>
                                                            <input asp-for="Phone" name="Phone" id="phoneConfirmation" class="form-control" />
                                                        </td>

                                                        <td>
                                                            <b style="margin-left:23%">Designation</b>
                                                            <input asp-for="Designation" name="Designation" id="designationConfirmation" class="form-control" style="margin-left:23%" />
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <b style="margin-left:0%">Company</b>
                                                            <input asp-for="Company" name="Company" class="form-control" id="companyConfirmation" />
                                                        </td>
                                                    </tr>

                                                </table>


                                                <table class="table">
                                                    <tr class="col-offset-4 " style="background-color:rgba(52,73,94,0.94); color:white; font-size:18px;">
                                                        <td class=" headings ">
                                                            Visit Details
                                                        </td>
                                                        <td></td>
                                                        <td></td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <b style="margin-left:0%">Visit Date</b>
                                                            <input type="date" id="dateConfirmation" value="@DateTime.Now" asp-for="VisitingDate" class="form-control" style="width:450px" />
                                                        </td>
                                                        <td>
                                                            <b style="margin-left:8%">Start Time</b>
                                                            <input id="startTimeConfirmation" name="StartTime" asp-for="StartTime" class="form-control" style="width:180px;margin-left:8%" />
                                                        </td>
                                                        <td>
                                                            <b style="margin-left: 23%;">End Time</b>
                                                            <input id="endTimeConfirmation" name="EndTime" asp-for="EndTime" class="form-control" style="width: 180px;margin-left: 23%;" />
                                                        </td>
                                                    </tr>
                                                </table>


                                                <table class="table">
                                                    <tr class="col-offset-4 " style="background-color:rgba(52,73,94,0.94); color:white; font-size:18px;">
                                                        <td class=" headings ">
                                                            Contact Details
                                                        </td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <b style="margin-left:0%">Primary Contact</b>
                                                            <input type="text" id="primaryContactConfirmation" class="form-control" />
                                                        </td>

                                                        <td>
                                                            <b style="margin-left:23%">Secondary Contact</b>
                                                            <input type="text" id="secondaryContactConfirmation" class="form-control" style="margin-left:23%" />
                                                        </td>
                                                    </tr>
                                                </table>


                                                <table class="table">
                                                    <thead>
                                                        <tr class="col-offset-4 " style="background-color:rgba(52,73,94,0.94); color:white; font-size:18px;">
                                                            <td class=" headings ">
                                                                Arrangements
                                                            </td>
                                                            <td></td>
                                                            <td></td>
                                                            <td></td>
                                                        </tr>
                                                        <tr>
                                                            <th></th>
                                                            <th style="padding-left:25px;font-size:15px">Arrangement Name</th>
                                                            <th style="padding-left:67px;font-size:15px">Description</th>
                                                            <th style="padding-left:9px;font-size:15px">Delegate Contact </th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        @if (Model != null)
                                                        {
                                                            @foreach (var item in Model.VisitArrangement)
                                                            {
                                                                var id = "finaltr_" + @item.ArrangementId;
                                                                var chkid = "chkarrangment_" + @item.ArrangementId;
                                                                var descid = "txtarrangdesc_" + @item.ArrangementId;
                                                                var delegateid = "ddldelegatearrangid_" + @item.ArrangementId;
                                                                <tr style="display:none" id="@id">
                                                                    <td style="width:2%">
                                                                        <div class="form-group ">
                                                                            <div class="fm-checkbox">
                                                                                <input type="checkbox" disabled="disabled" asp-for="@item.IsSelected" id="@chkid" style="width:100px;height:20px" />
                                                                            </div>
                                                                        </div>
                                                                    </td>
                                                                    <td style="width:20%">
                                                                        <div class="form-group col-xs-15">
                                                                            <div class="nk-int-st">
                                                                                <span asp-for="@item.Name" class="visitArrangements" id="name" style="font-size:medium;margin-top:40%;" name="@Model.VisitArrangement[0].Name">@item.Name</span>
                                                                                <span asp-validation-for="@item.Name" class="text-danger"></span>
                                                                            </div>
                                                                        </div>
                                                                    </td>
                                                                    <td style="width:30%">
                                                                        <div class="form-group col-xs-12">
                                                                            <div class="nk-int-st">
                                                                                <input asp-for="@item.Description" id="@descid" name="VisitArrangement.Description" class="form-control" disabled="disabled" />
                                                                                <span asp-validation-for="@item.Description" class="text-danger"></span>
                                                                            </div>
                                                                        </div>
                                                                    </td>
                                                                    <td style="width:2%">
                                                                        <div class="form-group">
                                                                            <div class="nk-int-st">
                                                                                <select asp-for="@item.DelegateContactID" class="delegateContactId" id="@delegateid" name="VisitArrangement.DelegateContactID" disabled="disabled">
                                                                                    @foreach (var itemUser in Model.Users)
                                                                                    {
                                                                                        <option value="@itemUser.UserId">@itemUser.FirstName</option>
                                                                                    }
                                                                                </select>
                                                                            </div>
                                                                        </div>

                                                                    </td>
                                                                </tr>
                                                            }
                                                        }
                                                    </tbody>
                                                </table>
                                            </div>
                                            <br />
                                            <br />
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<script>

    

    //$(".buttonNext").addClass("disabled");

    function GetDetails() {
        var UserName = $("#visitorName").val();
        //validate();
        $.ajax({
            type: "Get",
            // data: {Visitordetailid : Visitordetailid, type : type},
            url: "GetDetailsByName?UserName=" + UserName,
            contentType: "application/json;charset=UTF-8",
            dataType: "json",
            success: function (result) {

                $("#visitorName").val(result.visit.visitorName);
                $("#emailAddress").val(result.visit.emailAddress);
                $("#phone").val(result.visit.phone);
                $("#company").val(result.visit.company);
                $("#photoUrl").val(result.visit.photoUrl);
                $("#designation").val(result.visit.designation);
            }
        });
    }

    function start() {
        var endtime = document.getElementById('startTime').value;
        var t1 = parseInt(endtime.slice(0, 2));
        var t2 = endtime.slice(3, 5);
        t1 = t1 + 1;
        if (t1 < 10) {
            t1 = '0' + t1;
        }
        if (t1 == 24) {
            t1 = '00';
        }
        document.getElementById('endTime').value = '' + t1 + ':' + t2 + '';
    }

    //function validate() {
    //    var IsValidated = true;
    //    if (document.getElementById("visitorName").value == "") {
    //        document.getElementById("visitorName").classList.add('parsley-error');
    //        //document.getElementById("vn").innerHTML = 'this feild is required';
    //        IsValidated = false;
    //    }
    //    else {
    //        document.getElementById("visitorName").classList.remove('parsley-error');
    //        document.getElementById("vn").innerHTML = '';
    //    }

    //    if (document.getElementById("designation").value == "") {
    //        document.getElementById("designation").classList.add('parsley-error');
    //        //document.getElementById("dn").innerHTML = 'this feild is required';
    //        IsValidated = false;
    //    }
    //    else {
    //        document.getElementById("designation").classList.remove('parsley-error');
    //        document.getElementById("dn").innerHTML = '';
    //    }

    //    if (document.getElementById("emailAddress").value == "") {
    //        document.getElementById("emailAddress").classList.add('parsley-error');
    //        document.getElementById("em").innerHTML = 'this feild is required';
    //        IsValidated = false;
    //    }
    //    else {
    //        document.getElementById("emailAddress").classList.remove('parsley-error');
    //        document.getElementById("em").innerHTML = '';
    //    }


    //    if (document.getElementById("phone").value == "") {
    //        document.getElementById("phone").classList.add('parsley-error');
    //        document.getElementById("pn").innerHTML = 'this feild is required';
    //        IsValidated = false;
    //    }
    //    else {
    //        document.getElementById("phone").classList.remove('parsley-error');
    //        document.getElementById("pn").innerHTML = '';
    //    }


    //    if (document.getElementById("company").value == "") {
    //        document.getElementById("company").classList.add('parsley-error');
    //        document.getElementById("cn").innerHTML = 'this feild is required';
    //        IsValidated = false;
    //    }
    //    else {
    //        document.getElementById("company").classList.remove('parsley-error');
    //        document.getElementById("cn").innerHTML = '';
    //    }
    //    if (IsValidated == true) {
    //        $(".buttonNext").removeClass("disabled");
    //    }
    //}

    var today = new Date();
    var dd = today.getDate();
    var mm = today.getMonth() + 1;
    var yyyy = today.getFullYear();
    if (dd < 10) { dd = '0' + dd; } if (mm < 10) { mm = '0' + mm; }
    document.getElementById("visitingDate").min = yyyy + "-" + mm + "-" + dd;



</script>



<script>

    //function PrimaryChange() {
    //    var result = $("#ddlprimaryContact").val();
    //    // after creating the option
    //    // try following
    //    $("#ddlsecondaryContact option[value*=" + result + "]").prop('disabled', true);
    //}

    $(document).ready(function () {
        

        // Initialize select2
        $("#selUser").select2();

        // Read selected option
        $('#but_read').click(function () {
            var username = $('#selUser option:selected').text();
            var userid = $('#selUser').val();
            $('#result').html("id : " + userid + ", name : " + username);
        });
    });
</script>

<script>
    $(document).ready(function () {

        // Initialize select2
        $(".dropdownSearch").select2();

        // Read selected option
        $('#but_read').click(function () {
            var username = $('#selUser option:selected').text();
            var userid = $('#selUser').val();
            $('#result').html("id : " + userid + ", name : " + username);
        });
    });
</script>




<script type="text/javascript">
 

    $(document).ready(function () {



        // Default options
        $("#control_1, #control_2, #control_3, #control_4, #control_5, #control_9, #control_12").ultraselect();
        $("#control_7").ultraselect({ oneOrMoreSelected: '*' });
    });
</script>


@*<script src="~/lib/jquery/multidelete.js"></script>
    <link rel="stylesheet" href="~/lib/jquery/dist/multidelete.css" />*@

<link rel="stylesheet" href="~/lib/bootstrap-multiselect.css" />
<script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>

<script src="~/lib/bootstrap-multiselect.js"></script>





<script>
        $('.dropdown-sin-2').dropdown({
            input: '<input type="text" maxLength="20" placeholder="Search">'
        });
        $('.dropdown-sin-1').dropdown({
            input: '<input type="text" maxLength="20" placeholder="Search">'
        });

        $("#startTime").datetimepicker({ format: 'hh:mm A' });


</script>

<script>






    var Random = Mock.Random;
    var json1 = Mock.mock({
        "data|10-50": [{
            name: function () {
                return Random.name(true)
            },
            "id|+1": 1,
            "disabled|1-2": true,
            groupName: 'Group Name',
            "groupId|1-4": 1,
            "selected": false
        }]
    });

    $('.dropdown-mul-1').dropdown({
        data: json1.data,
        limitCount: 40,
        multipleMode: 'label',
        choice: function () {
            // console.log(arguments,this);
        }
    });


</script>


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<link rel="stylesheet" href="~/vendors/select2-develop/dist/css/select2.min.css" type="text/css" />
<script src="~/vendors/select2-develop/dist/js/select2.min.js" type="text/javascript"></script>
<link rel="stylesheet" href="~/vendors/select2/dist/css/select2.css" />
<script src="~/vendors/select2/dist/js/select2.js"></script>
@*<style>
        .select3-selection__arrow b {
            margin-left: 100px !important;
        }
    </style>*@



